<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=10" />
<title>Resources | Aerospace 101</title>
<link rel='stylesheet' id='style-css'  href='../style.css' type='text/css' media='all' />
<link rel="stylesheet" href="../jqmath/jqmath-0.4.3.css">
<link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon">
<script src="../jqmath/jquery-1.4.3.min.js"></script>
<script src="../jqmath/jqmath-etc-0.4.6.min.js" charset="utf-8"></script>
<script>M.MathPlayer = false; M.trustHtml = true;</script>
</head>

<body class="page page-id-364 page-parent page-template page-template-templates page-template-template-full-notitle page-template-templatestemplate-full-notitle-php siteorigin-panels responsive layout-full no-js has-menu-search panels-style-force-full">
<a id="top"></a>
<div id="page-wrapper">
 <header id="masthead" class="site-header masthead-logo-in-menu" role="banner">
 <nav role="navigation" class="site-navigation main-navigation primary use-sticky-menu">
 <div class="full-container">
  <a href="../" title="Aerospace 101" rel="home" class="logo"><img src="../aerospacelogo.png"  class="logo-height-constrain"  width="1000"  height="100"  alt="Aerospace 101 Logo"  /></a>
  <div class="menu-menu-1-container"><ul id="menu-menu-1" class="menu"><li id="menu-item-249" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-249"><a href="../index.html">Welcome</a></li>
   <li id="menu-item-222" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-222"><a href="/toc.html">Table of Contents</a>
   <ul class="sub-menu">
   <li id="menu-item-223" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-223"><a href="../introduction/index.html">Introduction</a></li>
   <li id="menu-item-224" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-224"><a href="../fluid-mechanics/index.html">Fluid Mechanics</a></li>
   <li id="menu-item-225" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-225"><a href="../flow-visualisation/index.html">Flow Visualisation</a></li>
   <li id="menu-item-226" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-226"><a href="../properties-of-the-atmosphere/index.html">Properties of the Atmosphere</a> </li>
   <li id="menu-item-233" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-233"><a href="../subsonic-aerofoil-and-wing-theory/index.html">Subsonic Aerofoil and Wing Theory</a> </li>
   <li id="menu-item-242" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-242"><a href="../gas-dynamics-and-supersonic-flow/index.html">Gas Dynamics and Supersonic Flow</a></li>
   <li id="menu-item-243" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-243"><a href="../propulsion/index.html">Propulsion</a> </li>
   <li id="menu-item-248" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-248"><a href="../aircraft-instruments/index.html">Aircraft Instruments</a></li>
   <li id="menu-item-275" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-275"><a href="../aircraft-performance/index.html">Aircraft Performance</a></li>
   <li id="menu-item-276" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-276"><a href="../Flight-Mechanics/index.html">Flight Mechanics</a></li>   
   <li id="menu-item-356" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-356"><a href="../aeroelasticity/index.html">Aeroelasticity</a></li>
   <li id="menu-item-363" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-363"><a href="../wind-tunnel-simulation/index.html">Wind Tunnel Simulation</a> </li>
   </ul>
   </li>
   <li id="menu-item-366" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-364 current_page_item menu-item-366"><a href="../resources/index.html">Resources</a></li>
   <li id="menu-item-535" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-535"><a href="../contact-us/index.html">Contact Us</a></li>
   </ul>
  </div>
 </div>
 </nav><!-- .site-navigation .main-navigation -->
 </header><!-- #masthead .site-header -->
  <div id="main" class="site-main"> 
  <div class="full-container">
   <div id="primary" class="content-area">
    <div id="content" class="site-content" role="main">
     <article id="post-364" class="post-364 page type-page status-publish hentry post">
     <div class="entry-main">
     <div class="entry-content"> 

<h3>Thin Aerofoil Theory</h3>
<table width="100%" border=1 cellpadding=10 bgcolor="#dfdfff">
<tr><td colspan=2>
This form calculates the lift and pitching moment properties of a two dimensional
aerofoil section using the mean line, thin aerofoil theory.  The section data can be
loaded from file (see <a href="nacacalc.html">nacacalc.html</a> for required format).<br />
&nbsp;<br />
In order to analyse a section you need to first select an Aerofoil Section Data File that you have 
saved on your computer. Use "Browse..." to find and select a file.  Then Click "Compute" to solve for appropriate coefficients. 
</td></tr>
<tr><td valign=top>
<B>Input Parameters</B><br>
<table>
<tr><td>Aerofoil Section Data File<br>
<form>
<input type='hidden' name='max_file_size' id='max_file_size' value='1000000' />
<input name='upfile' id='upfile' type='file' onfocus="HideResults();"  autofocus><br /> 
</td></tr>
</table><br>
<hr>
<input id="ComputeButton" type="button" value="Compute" onclick="ComputeFlow();" >
<br />&nbsp;<br />
</form>
</td><td valign=top width="60%" bgcolor="#FFFFFF">
<fieldset id="results">
<canvas id="imageout" width="600" height="250" style="border:1px solid grey"></canvas>
</fieldset>
<p id='output2'> </p> 
<fieldset id="datafile"> 
<p id='output' hidden> </p>
</fieldset>

</td>
</tr>
</table>
</font>
<br>
</center>
<p><a href="2-d-thin-aerofoil-theory.html">Back to Thin Aerofoil Theory Section</a></p>
<p><br /></p>
<p><br /></p>
<p><br /></p>
<p><br /></p>

<script>
 const flines = document.getElementById("output");
 const fileInput = document.getElementById("upfile");
 fileInput.addEventListener("change", handleFileSelection);
 
function handleFileSelection(event) {

 const file = event.target.files[0];
 flines.textContent = " "; // Clear previous file content

  // Validate file existence and type
 if (!file) {
  alert("No file selected. Please choose a file.");
  return;
 }

 if (!file.type.startsWith("text")) {
  alert("Unsupported file type. Please select a text file.");
  return;
 }

 // Read the file
 const reader = new FileReader();
 reader.onload = () => {
  flines.textContent = reader.result;
 };
 reader.onerror = () => {
  alert ("Error reading the file. Please try again.");
 };
 reader.readAsText(file);
}  
  
function HideResults() {
  document.getElementById("results").style.visibility="hidden";
  document.getElementById("datafile").style.visibility="hidden";
  document.getElementById("output2").innerHTML=" "
}

function ComputeFlow() {

 var maxfile = document.getElementById("max_file_size").value;
 var maxsize = Number(maxfile);

 var strng;
 var words = [];
 var i,j,k,l,m,n,found;
 strng = flines.textContent;
 i = strng.length;
 if (i>maxsize) {
  alert ('File Size too Large'); return;
 }
 //console.log(i);
 j=0;
 k=0;
 words[0] = "";
 found = 0;
 while (j<i) {
  char1 = strng[j];
  if (char1==" " || char1=="\t" || char1=="\n") {
   if (found==1) {
    k=k+1;
    found=0;
    words[k]="";
   } 
  } else {
   if (char1=='-' || char1=='.') {
    found = 1;
    words[k]=words[k] + char1;
   } else { 
    if (char1<'0' || char1>'z') {
     found=1;
    } else { 
     found=1;
     words[k]=words[k] + char1;
    } 
   } 
  }
  j=j+1;
 } 
 console.log(words);
 i=0;
 var numpoint = Number(words[8]);
 var num = Math.trunc(numpoint/2) + 1;
 var test=words[19];
 // console.log(test);
 if (test!='Y') {
   alert('Corrupt Data File'); return;
 } 
 j=20;
 var xu = [];
 var yu = [];
 var xl = [];
 var yl = [];
 var xmax,xmin;
 while (i<num) {
  xu[i]=Number(words[j]);
  yu[i]=Number(words[j+1]);
  xl[i]=Number(words[j+2]);
  yl[i]=Number(words[j+3]);
  j=j+4;
  if (i==0) {
   xmax=xu[i];
   xmin=xu[i];
  } else {
   if (xu[i]>xmax) {
    xmax=xu[i];
   } 
   if (xu[i]<xmin) {
    xmin=xu[i];
   }
  } 
  i=i+1;
 }  
// console.log(xl);
// Add values to the graph
 var imgWidth=600;
 var imgHeight=450;

// Create image and define colors
 const c = document.getElementById("imageout");
 const ctx = c.getContext("2d");
 ctx.fillStyle = "white";
 ctx.fillRect(0, 0, 600, 450);

 var chord=xmax-xmin;
 // draw section outline
 i=num-1;
 ctx.beginPath();
 ctx.fillStyle="green";
 ctx.strokeStyle="black";
 ctx.lineWidth=1;
 var x1,y1;
 while (i>=0) {
  x1=150+Math.trunc(xu[i]*300.0/chord);
  y1=225-Math.trunc(yu[i]*300.0/chord);
  if (i==(num-1)) {
   ctx.moveTo(x1,y1);
  } else {
   ctx.lineTo(x1,y1);
  }
  i=i-1;
 }
 i=0
 while (i<num) {
  x1=150+Math.trunc(xl[i]*300.0/chord);
  y1=225-Math.trunc(yl[i]*300.0/chord);
  if (i==(num-1)) {
   ctx.moveTo(x1,y1);
  } else {
   ctx.lineTo(x1,y1);
  }
  i=i+1;
 }
 ctx.closePath();
 ctx.stroke();
 ctx.globalAlpha=0.5;
 ctx.fill();
 x1=150;
 y1=0;
 var x2=550;
 var y2=225;
 ctx.beginPath();
 ctx.strokeStyle="grey";
 ctx.moveTo(150,225);
 ctx.lineTo(550,225);
 ctx.globalAlpha=1;
 ctx.stroke();
 ctx.font = "12px Arial";
 ctx.fillStyle = "black";
 ctx.fillText("X",530,235);
 x1=0;
 y1=imgHeight/2;
 x2=150;
 y2=225-y1;
 ctx.beginPath();
 ctx.strokeStyle="grey";
 ctx.moveTo(150,225);
 ctx.lineTo(x2,y2);
 ctx.stroke();
 ctx.fillStyle = "black";
 ctx.fillText("Y",160,y2+10);

 i=0;
 var xc = [];
 var yc = [];
 ctx.beginPath();
 ctx.lineWidth=2;
 ctx.strokeStyle="red";
 while (i<num) {
  xc[i]=(xu[i]+xl[i])*0.5;
  yc[i]=(yu[i]+yl[i])*0.5;
  x1=150+Math.trunc(xc[i]*300.0/chord);
  y1=225-Math.trunc(yc[i]*300.0/chord);
  if (i==0) {
   ctx.moveTo(x1,y1);
  } else {
   ctx.lineTo(x1,y1);
  } 
  i=i+1;
 }
 ctx.stroke(); 
 j=0;
 var sum =[];
 while (j<10) {
  sum[j]=0;
  j=j+1;
 } 
 i=1;
 var PI=3.1415926;
 var x0,y0,dydx,cs,th0,th1,an;
 while (i<num) {
  x0=xc[i-1];
  y0=yc[i-1];
  x1=xc[i];
  y1=yc[i];
  if (Math.abs(x0-x1)<1.0E-10) {
   dydx=0.0;
  } else {
   dydx=(y1-y0)/(x1-x0);
  }
  cs=(1.0-2.0*x0/chord);
  if (cs<(-0.999999)) {
   cs=-0.999999;
  } 
  if  (cs>0.999999) {
   cs=0.999999;
  }
  th0=Math.acos(cs);
  cs=(1.0-2.0*x1/chord);
  if (cs<-0.999999) {
   cs=-0.999999;
  } 
  if (cs>0.999999) {
   cs=0.999999;
  }
  th1=Math.acos(cs);
  sum[0]=sum[0]+dydx*(th1-th0);
  j=1;
  while (j<10) {
   an=j;
   sum[j]=sum[j]+dydx/an*(Math.sin(an*th1)-Math.sin(an*th0));
   j=j+1;
  }
  i=i+1; 
 }
 j=1;
 while (j<10) {
  sum[j]=-sum[j]/PI*2.0;
  j=j+1;
 } 
 var alf=-10.0/180.0*PI;
 var cl0=2.0*PI*(alf-sum[0]/PI-sum[1]/2.0);
 var cl00=2.0*PI*(-sum[0]/PI-sum[1]/2.0);
 alf=20.0/180.*PI;
 var cl1=2.0*PI*(alf-sum[0]/PI-sum[1]/2.0);
 var cm=PI/4.0*(sum[1]-sum[2]);
 y0=50.0;
 i=0;
 var coeff="Cl = 2&pi;&alpha; + " + cl00.toPrecision(4) + " <br />";
 coeff=coeff + "Cm(1/4c) = " + cm.toPrecision(4) + "<br />&nbsp;<br />"
 coeff=coeff + "Coefficients : ";
 while (i<10) {
  coeff=coeff + "A<sub>" + i.toPrecision(1) + "</sub> = " + sum[i].toPrecision(5) + ", ";
  i=i+1;
 }
 coeff=coeff + "<br />";
 
 document.getElementById("output2").innerHTML = coeff;
 document.getElementById("results").style.visibility="visible";
}
 
</script>


<center><a href="#top">Back to Top</a></center>


</div><!-- .entry-content -->
</div>
</article><!-- #post-364 -->
</div><!-- #content .site-content -->
</div><!-- #primary .content-area -->
</div><!-- .full-container -->
</div><!-- #main .site-main -->
<footer id="colophon" class="site-footer" role="contentinfo">
<div id="footer-widgets" class="full-container">
</div>
<div id="theme-attribution"> 
<center><a href="../terms_and_conditions.pdf"><img border="0" Height="25" src="../c-foot.png" /></a></center>
</div>
</footer><!-- #colophon .site-footer -->
</div><!-- #page-wrapper -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NDXEPQKPZS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NDXEPQKPZS');
</script>

</body>
</html>

